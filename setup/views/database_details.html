{% extends "base.html" %}

{% block content %}

<br>
<div class="progress">
    <div class="progress-bar" role="progressbar" aria-valuenow="28" aria-valuemin="0" aria-valuemax="100" style="width: 28%;">
        28%
    </div>
</div>

<h1 class="page-header">Step {{state}} - Database (cont.)</h1>

Now you need to supply the MySQL server information and path information. detailed
instructions on each item can be found in the <a href='documentation/install' target='_blank'>
<br>
<span style='text-decoration: underline;'>INSTALL</span></a> manual file.

{{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
    <input type='hidden' name='state' value='3'>
    <input type='hidden' name='site' value='{{site_id}}'>
    <input type='hidden' name='inst' value='{{inst}}'>

    <div class="form-group">
        <div class="col-sm-12">
            <p class="lead">MySQL Server</p>
            <hr>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.host) }}
        <div class="col-sm-4">
            {{ form_widget(form.host) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>If you run mysql and apache/php on the same computer, then leave this as 'localhost'. if they are on separate computers, then enter the ip address of the computer running mysql.</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.port) }}
        <div class="col-sm-4">
            {{ form_widget(form.port) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>Default port is 3306</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.dbname) }}
        <div class="col-sm-4">
            {{ form_widget(form.dbname) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>Name of the MySQL database</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.login) }}
        <div class="col-sm-4">
            {{ form_widget(form.login) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>Name of the DB user. Recommend to keep this unique for safety.</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.pass) }}
        <div class="col-sm-4">
            {{ form_widget(form.pass) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>Name of the DB password.</small>
        </div>
    </div>

    {% if inst != 2 %}
    <div class="form-group">
        {{ form_label(form.rootuser) }}
        <div class="col-sm-4">
            {{ form_widget(form.rootuser) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>MySQL root user</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.rootpass) }}
        <div class="col-sm-4">
            {{ form_widget(form.rootpass) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>MySQL root password</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.loginhost) }}
        <div class="col-sm-4">
            {{ form_widget(form.loginhost) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>if you run apache/php and mysql on the same computer, then leave this as 'localhost'. if they are on separate computers, then enter the ip address of the computer running apache/php</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.collate) }}
        <div class="col-md-4 help-block">
            {{ form_widget(form.collate) }}
        </div>
        <div class="col-md-6">
            <small>This is the collation setting for mysql. leave as 'general' if you are not sure. if the language you are planning to use in openemr is in the menu, then you can select it. otherwise, just select 'general'</small>
        </div>
    </div>
    {% endif %}

    <div class="form-group">
        <div class="col-md-12">
            <p class="lead">OpenEMR User</p>
            <hr>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.user) }}
        <div class="col-sm-4">
            {{ form_widget(form.user) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>This is the login name of user that will be created for you. Limit this to one word</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.iuserpass) }}
        <div class="col-sm-4">
            {{ form_widget(form.iuserpass) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>This is the password for the initial user account above.</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.iufname) }}
        <div class="col-sm-4">
            {{ form_widget(form.iufname) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>This is the first name of the initial user.</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.iuname) }}
        <div class="col-sm-4">
            {{ form_widget(form.iuname) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>This is the last name of the initial user.</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.igroup) }}
        <div class="col-sm-4">
            {{ form_widget(form.igroup) }}
        </div>
        <div class="col-sm-6 help-block">
            <small>This is the group that will be created for your users; it should be the name of your practice</small>
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.source) }}
        <div class="col-sm-4">
            <select name="" id="" class="form-control">
                {% for site in sitesList %}
                <option>{{site}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-sm-6 help-block">
            <small>The site directory that will be a model for the new site</small>
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-10 col-sm-offset-2">
            {{ form_widget(form.clone_database) }}
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-12 text-right">
            {{ form_widget(form.submit) }}
            <button type="submit" class="btn btn-large">Continue&nbsp;<i class="fa fa-chevron-right"></i></button>
        </div>
    </div>
{{ form_end(form) }}
{% endblock %}
